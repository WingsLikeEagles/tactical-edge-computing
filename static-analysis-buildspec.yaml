version: 0.2

env:
  variables:
    PYTHON_VERSION: "3.6"

phases:
  install:
    commands:
      - echo "install stage beginning"
      - env | sort
      - which apt
      - apt list --installed
      - apt-get update -y
      - apt-get install python${PYTHON_VERSION}-venv
      - virtualenv --python=python${PYTHON_VERSION} ~/dev-env
      - source ~/dev-env/bin/activate
      - pip install pycodestyle
    finally:
      - echo "install stage finishing"
  pre_build:
    commands:
      - echo "pre_build stage beginning"
      - pycodestyle --version
    finally:
      - echo "pre_build stage finishing"
  build:
    commands:
      - echo "build stage beginning"
      - pycodestyle src/fd_supply_services/
    finally:
      - echo "build stage finishing"
  post_build:
    commands:
      - echo "post_build stage beginning"
    finally:
      - echo "post_build stage finishing"

